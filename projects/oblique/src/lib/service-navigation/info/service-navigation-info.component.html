<button
	type="button"
	id="service-navigation-info-popover-toggle"
	class="ob-widget"
	mat-icon-button
	obButton="tertiary"
	[matTooltip]="'i18n.oblique.service-navigation.info.button' | translate"
	[obPopover]="popoverInfo"
	placement="bottom"
>
	<mat-icon svgIcon="question" />
</button>

<ng-template #popoverInfo>
	<div id="ob-service-navigation-info-popover-content" cdkTrapFocus cdkTrapFocusAutoCapture>
		<h3 class="ob-screen-reader-only">{{ "i18n.oblique.service-navigation.info.button" | translate }}</h3>
		<p *ngIf="description">{{ description | translate }}</p>

		<ob-service-navigation-popover-section
			*ngIf="links?.length > 0"
			header="i18n.oblique.service-navigation.info.header"
			[text]="helpText"
			[links]="links"
		/>
		<ob-service-navigation-popover-section
			*ngIf="contact?.email || contact?.phone || contact?.formUrl"
			header="i18n.oblique.service-navigation.info.contact.header"
			[text]="contactText"
		>
			<ul class="ob-service-navigation-info-links" obContent>
				@for (link of contact | obContactToLinks; track $index) {
					<li>
						<a
							[id]="link.label + '-ob-contact-link'"
							[href]="link.url"
							[isExternalLink]="!link.isInternalLink"
							[attr.aria-label]="
								typeof link.ariaLabel === 'string'
									? (link.ariaLabel | translate)
									: (link.ariaLabel?.text | translate: link.ariaLabel?.parameters)
							"
						>
							<mat-icon *ngIf="link.icon" [svgIcon]="link.icon" class="ob-icon-text" />{{ link.label | translate }}
						</a>
						@if (link.extraText) {
							<br />
							{{ link.extraText | translate }}
						}
					</li>
				}
			</ul>
		</ob-service-navigation-popover-section>
	</div>
</ng-template>
