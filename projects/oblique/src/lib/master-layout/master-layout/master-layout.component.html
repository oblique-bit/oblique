<nav
	class="ob-access-keys"
	role="navigation"
	[attr.aria-label]="'i18n.oblique.master-layout.accesskey.title' | translate"
>
	<ul>
		<li>
			<a
				class="ob-accessible"
				accesskey="0"
				[routerLink]="route.path"
				[queryParams]="route.params"
				[fragment]="contentId"
			>
				<span class="ob-icon-wrapper"><mat-icon svgIcon="accessibility" /></span>
				{{ "i18n.oblique.master-layout.accesskey.main-content" | translate }}
			</a>
		</li>
		@if (!noNavigation && navigation?.length) {
			<li>
				<a
					class="ob-accessible"
					accesskey="1"
					[routerLink]="route.path"
					[queryParams]="route.params"
					fragment="navigation"
				>
					<span class="ob-icon-wrapper"><mat-icon svgIcon="accessibility" /></span>
					{{ "i18n.oblique.master-layout.accesskey.navigation" | translate }}
				</a>
			</li>
		}
		@for (skipLink of skipLinksInternal; track skipLink) {
			<li>
				<a
					class="ob-accessible"
					[attr.accesskey]="skipLink.accessKey"
					[routerLink]="skipLink.url === 'current' ? route.path : skipLink.url"
					[queryParams]="route.params"
					[fragment]="skipLink.fragment"
				>
					<span class="ob-icon-wrapper"><mat-icon svgIcon="accessibility" /></span>
					{{ skipLink.label | translate }} [{{ skipLink.accessKey }}]
				</a>
			</li>
		}
	</ul>
</nav>
<div
	class="ob-viewport"
	[class.ob-fixed-layout]="isFooterSticky && isHeaderSticky"
	[class.ob-continuous-layout]="!isFooterSticky && !isHeaderSticky"
	[class.ob-off-canvas-main]="hasOffCanvas"
>
	@if (isHeaderSticky && !isFooterSticky) {
		<ng-container [ngTemplateOutlet]="header" />
	}
	<div class="ob-master-layout-wrapper" cdkScrollable (scroll)="scrollTop(wrapper)" #wrapper>
		@if (!isHeaderSticky || isFooterSticky) {
			<ng-container [ngTemplateOutlet]="header" />
		}
		@if (hasCover) {
			<div class="ob-cover-layout">
				<div class="ob-cover-viewport">
					<ng-container *ngTemplateOutlet="normalLayout" />
				</div>
			</div>
		} @else {
			<main id="content" class="ob-main-layout" tabindex="-1" cdkScrollable (scroll)="scrollTop(main)" #main>
				<ob-notification channel="oblique" />
				<router-outlet />
			</main>
		}
		<ng-template #normalLayout>
			<main id="content" class="ob-main-layout" tabindex="-1" cdkScrollable (scroll)="scrollTop(main)" #main>
				<ob-notification channel="oblique" />
				<router-outlet />
			</main>
		</ng-template>
		@if (!isFooterSticky || isHeaderSticky) {
			<ng-container [ngTemplateOutlet]="footer" />
		}
	</div>
	@if (isFooterSticky && !isHeaderSticky) {
		<ng-container [ngTemplateOutlet]="footer" />
	}

	<ng-template #header>
		<ob-master-layout-header [navigation]="navigation" (navigationChanged)="emitNavigation($event)">
			<ng-content select="[obHeader]" obHeader />
			<ng-content select="[obHeaderAction]" obHeaderAction />
			<ng-content select="[obHeaderTitle]" obHeaderTitle />
			<ng-content select="[obNavigation]" obNavigation />
			@for (template of headerControlTemplates; track template) {
				<ng-template #obHeaderControl>
					<ng-container [ngTemplateOutlet]="template" />
				</ng-template>
			}
			@for (template of headerMobileControlTemplates; track template) {
				<ng-template #obHeaderMobileControl>
					<ng-container [ngTemplateOutlet]="template" />
				</ng-template>
			}
			<ng-template #obHeaderLogo>
				<ng-container [ngTemplateOutlet]="obLogo || logo" />
			</ng-template>
		</ob-master-layout-header>
	</ng-template>

	<ng-template #footer>
		<ob-master-layout-footer [version]="version">
			<ng-content select="[obFooter]" obFooter />
			<ng-content select="[obFooterInfo]" obFooterInfo />
			@for (template of footerLinkTemplates; track template) {
				<ng-template #obFooterLink>
					<ng-container [ngTemplateOutlet]="template" />
				</ng-template>
			}
		</ob-master-layout-footer>
	</ng-template>
</div>
<ob-top-control (scrollToTop)="focusElement(this.contentId)" />
@if (hasOffCanvas) {
	<div class="ob-off-canvas-sidebar">
		<header class="ob-off-canvas-header">
			<h2>
				<ng-content select="[obOffCanvasTitle]" />
			</h2>
			<button
				type="button"
				mat-icon-button
				obButton="secondary"
				[matTooltip]="'i18n.common.close' | translate"
				obOffCanvasToggle
				class="ob-close"
				#offCanvasClose
			>
				<mat-icon svgIcon="xmark" />
			</button>
		</header>
		<div class="ob-off-canvas-content">
			<ng-content select="[obOffCanvasContent]" />
		</div>
	</div>
}
@if (hasOffCanvas) {
	<div class="ob-off-canvas-backdrop"></div>
}
<ob-spinner [fixed]="true" />
<ng-template #logo>
	@if (hasHighContrast) {
		<img
			[alt]="'i18n.oblique.header.logo' | translate"
			ngSrc="assets/images/logo-white.svg"
			priority
			[height]="38"
			[width]="156"
		/>
	} @else {
		<img
			[alt]="'i18n.oblique.header.logo' | translate"
			ngSrc="assets/images/logo.svg"
			priority
			[height]="38"
			[width]="156"
		/>
	}
</ng-template>
