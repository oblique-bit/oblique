<section [attr.aria-labelledby]="'obt-tour-list-title-' + listType()" class="obt-tour-list">
	<h2 [id]="'obt-tour-list-title-' + listType()" class="obt-tour-list-title">
		{{ listTitle() | translate }}
	</h2>

	@if (listItems()?.length) {
		<div class="obt-tour-list-items">
			@for (tour of listItems(); track tour.tourTitle; let tourIndex = $index) {
				<div class="obt-tour-list-item">
					<mat-accordion class="obt-tour-accordion">
						<mat-expansion-panel #panel="matExpansionPanel">
							<mat-expansion-panel-header
								class="expansion-header"
								[matTooltip]="
									panel.expanded
										? ('i18n.ob-tour.tour-menu.list.element.expansion-panel.description.screen-reader.close'
											| translate: { name: (tour?.tourTitle | translate) })
										: ('i18n.ob-tour.tour-menu.list.element.expansion-panel.description.screen-reader.open'
											| translate: { name: (tour?.tourTitle | translate) })
								"
							>
								<mat-panel-description class="ellipsis">
									{{
										panel.expanded
											? ("i18n.ob-tour.tour-menu.list.element.expansion-panel.description.close" | translate)
											: ("i18n.ob-tour.tour-menu.list.element.expansion-panel.description.open" | translate)
									}}
								</mat-panel-description>

								<mat-panel-title class="obt-tour-title ellipsis">
									{{
										tour?.tourTitle
											? (tour.tourTitle | translate)
											: ("i18n.ob-tour.tour-menu.list.element." + listType() + ".empty" | translate)
									}}
								</mat-panel-title>
							</mat-expansion-panel-header>

							<div id="obt-tour-description">
								<p>
									{{ "i18n.ob-tour.tour-menu.list.element.date.label" | translate }}
									{{ tour.lastUpdated | date: "fullDate" : undefined : currentLang }}
									{{ tour.lastUpdated | date: "shortTime" : undefined : currentLang }}
								</p>
								<p>
									{{ tour.tourDescription | translate }}
								</p>
							</div>
						</mat-expansion-panel>
					</mat-accordion>

					@if (actions()?.length) {
						<div class="action-list">
							@for (action of actions(); track action.name) {
								<div class="action-list-item">
									<obt-action-button
										[tourTitle]="tour.tourTitle | translate"
										[icon]="action.icon"
										[actionName]="action.name"
										[activeTourKey]="tour.storageKey"
										[id]="'tour-' + tourIndex + '-' + tour.storageKey + '-' + action.name"
										(tourStatusChanged)="tourStatusChanged.emit($event)"
									/>
								</div>
							}
						</div>
					}
				</div>
			}
		</div>
	} @else {
		<ul class="obt-tour-list-items">
			<li class="obt-tour-list-item">
				{{ `i18n.ob-tour.tour-menu.list.element.${listType()}.empty` | translate }}
			</li>
		</ul>
	}
</section>
